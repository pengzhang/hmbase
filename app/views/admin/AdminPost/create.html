#{extends 'AdminController/admin.html' /} 
#{set title:'创建文章' /}
#{include 'AdminController/nav.html'/}
#{include 'AdminController/sidebar.html'/}
#{set 'moreStyles' }
	<link href="/public/stylesheets/bootstrap/bootstrap-table.css" rel="stylesheet">
	<link rel="stylesheet" href="/public/simditor/simditor.css" media="screen" charset="utf-8" />
    <link rel="stylesheet" href="/public/simditor/simditor-html.css" media="screen" charset="utf-8" />
#{/set}


<div class="col-sm-9 col-sm-offset-3 col-lg-10 col-lg-offset-2 main">			
	<div class="row">
		<ol class="breadcrumb">
			<li><a href="#"><span class="glyphicon glyphicon-home"></span></a></li>
			<li class="active">创建文章</li>
		</ol>
	</div><!--/.row-->
	
	<div class="row">
		<div class="col-lg-12">
			<h1 class="page-header">创建文章</h1>
		</div>
	</div><!--/.row-->
			
	<div class="row">
		<div class="col-lg-12">
			<div class="panel panel-default">
				<div class="panel-heading">填写文章信息</div>
				<div class="panel-body">
					<div class="toolbar">
			            #{ifErrors}
			               <div class="alert alert-danger alert-dismissible" role="alert">
							  <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
							  <ul>
							   #{errors}
							   	 <li>${error}</li>
							   #{/errors}
						      </ul>
						   </div>
						#{/ifErrors}
			        </div>
			        <form action="/admin/posts/create" method="post">
				        <div class="form-group">
	                        <label>文章标题</label>
	                        <input type="text" class="form-control" name="post.title" placeholder="分类名称" value="${flash['category.category']}">
	                    </div>
				        <div class="form-group">
	                        <label class="control-label">父分类</label>
	                        <select class="form-control" name="post.categories.id" multiple="multiple">
	                        	<option value="">顶级</option>
	                        	#{list items:categories, as:'category'}
		                        	#{if category}
		                        		<option ${category.id==flash['category.id']?'selected="selected"':''} value="${category.id}">${category.category}</option>
		                        	#{/if}
	                        	#{/list}
	                        </select>
	                    </div>
	                    <div class="form-group">
	                    	<button type="submit" class="btn btn-primary">提交</button>
	                    </div>
			        </form>
				</div>
			</div>
		</div>
	</div><!--/.row-->
</div><!--/.main-->

#{set 'moreScripts' }
<script type="text/javascript" src="/public/simditor/module.js"></script>
<script type="text/javascript" src="/public/simditor/hotkeys.js"></script>
<script type="text/javascript" src="/public/simditor/uploader.js"></script>
<script type="text/javascript" src="/public/simditor/simditor.js"></script>
<script type="text/javascript" src="/public/simditor/beautify-html.js"></script>
<script type="text/javascript" src="/public/simditor/simditor-html.js"></script>
<script type="text/javascript">
  $(function() {
    var editor = new Simditor({
      textarea: $('#myEditor'),
      toolbar: ['image'],
      upload : {  
          url : '/upload/image', //文件上传的接口地址  
          params: null, //键值对,指定文件上传接口的额外参数,上传的时候随文件一起提交  
          fileKey: 'upload_file', //服务器端获取文件数据的参数名  
          connectionCount: 3,  
          leaveConfirm: '正在上传文件'  
      }
    });
  });
</script>
#{/set}

